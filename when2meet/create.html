<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Event - When2Meet</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="nav-brand">
                <h1 class="logo">When2Meet</h1>
                <span class="tagline">Find the perfect time for everyone</span>
            </div>
            <nav class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="dashboard.html" class="nav-link">My Events</a>
                <a href="create.html" class="nav-link active create-btn">+ New Event</a>
                <div class="user-menu">
                    <div class="user-avatar">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2MzY2RjEiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Im0xMiAxMmMxLjY1NDQgMCAzLTEuMzQ1NiAzLTNzLTEuMzQ1Ni0zLTMtMy0zIDEuMzQ1Ni0zIDMgMS4zNDU2IDMgMyAzem0wIDFjLTIuMDA0NCAwLTYgMS4wMDc4LTYgM3YxaDE2di0xYzAtMS45OTIyLTMuOTk1Ni0zLTYtM3oiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo8L3N2Zz4K" alt="User Avatar">
                    </div>
                    <div class="user-info">
                        <span class="username">jun</span>
                        <div class="user-dropdown">
                            <a href="#" class="dropdown-item">Profile</a>
                            <a href="#" class="dropdown-item">Settings</a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item">Sign Out</a>
                        </div>
                    </div>
                </div>
            </nav>
            <button class="mobile-menu-toggle" aria-label="Toggle mobile menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <main class="main-content" id="main-content">
        <div class="container">
            <div class="create-header">
                <h2>Create New Event</h2>
                <p>Set up a new meeting or event and let participants choose their availability</p>
            </div>

            <form class="create-form" id="createEventForm" novalidate>
                <div class="form-section">
                    <h3>Event Details</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventTitle" class="required">Event Title</label>
                            <input type="text" 
                                   id="eventTitle" 
                                   name="title"
                                   class="form-input" 
                                   placeholder="e.g., Weekly Team Standup"
                                   required
                                   maxlength="100"
                                   aria-describedby="titleHelp">
                            <div class="form-help" id="titleHelp">Choose a clear, descriptive title for your event</div>
                            <div class="form-error" id="titleError"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventDescription">Description</label>
                            <textarea id="eventDescription" 
                                      name="description"
                                      class="form-input form-textarea" 
                                      placeholder="Provide details about the event, agenda, location, or any other relevant information..."
                                      maxlength="500"
                                      rows="4"
                                      aria-describedby="descriptionHelp"></textarea>
                            <div class="form-help" id="descriptionHelp">
                                Optional: Add context to help participants understand the event
                                <span class="char-count" id="descriptionCount">0/500</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventCode">Event Code</label>
                            <div class="input-group">
                                <input type="text" 
                                       id="eventCode" 
                                       name="eventCode"
                                       class="form-input" 
                                       placeholder="AUTO-GENERATED"
                                       maxlength="10"
                                       pattern="[A-Z0-9]*"
                                       aria-describedby="codeHelp">
                                <button type="button" class="input-group-btn" id="generateCodeBtn">Generate</button>
                            </div>
                            <div class="form-help" id="codeHelp">A unique code for participants to join. Leave blank to auto-generate.</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group half-width">
                            <label for="eventTags">Tags</label>
                            <input type="text" 
                                   id="eventTags" 
                                   name="tags"
                                   class="form-input" 
                                   placeholder="work, meeting, weekly"
                                   aria-describedby="tagsHelp">
                            <div class="form-help" id="tagsHelp">Comma-separated tags to help organize and find events</div>
                        </div>
                        <div class="form-group half-width">
                            <label for="eventTimezone" class="required">Timezone</label>
                            <select id="eventTimezone" name="timezone" class="form-input form-select" required>
                                <option value="">Select timezone...</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Date & Time Settings</h3>
                    
                    <div class="form-row">
                        <div class="form-group half-width">
                            <label for="startDate" class="required">Start Date</label>
                            <input type="date" 
                                   id="startDate" 
                                   name="startDate"
                                   class="form-input" 
                                   required
                                   aria-describedby="startDateHelp">
                            <div class="form-help" id="startDateHelp">First possible day for the event</div>
                            <div class="form-error" id="startDateError"></div>
                        </div>
                        <div class="form-group half-width">
                            <label for="endDate" class="required">End Date</label>
                            <input type="date" 
                                   id="endDate" 
                                   name="endDate"
                                   class="form-input" 
                                   required
                                   aria-describedby="endDateHelp">
                            <div class="form-help" id="endDateHelp">Last possible day for the event</div>
                            <div class="form-error" id="endDateError"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group half-width">
                            <label for="startTime" class="required">Earliest Time</label>
                            <input type="time" 
                                   id="startTime" 
                                   name="startTime"
                                   class="form-input" 
                                   value="09:00"
                                   required>
                        </div>
                        <div class="form-group half-width">
                            <label for="endTime" class="required">Latest Time</label>
                            <input type="time" 
                                   id="endTime" 
                                   name="endTime"
                                   class="form-input" 
                                   value="17:00"
                                   required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group half-width">
                            <label for="slotDuration" class="required">Time Slot Duration</label>
                            <select id="slotDuration" name="slotDuration" class="form-input form-select" required>
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="60">1 hour</option>
                                <option value="120">2 hours</option>
                            </select>
                        </div>
                        <div class="form-group half-width">
                            <label for="eventDuration">Expected Event Duration</label>
                            <select id="eventDuration" name="eventDuration" class="form-input form-select">
                                <option value="">Not specified</option>
                                <option value="30">30 minutes</option>
                                <option value="60">1 hour</option>
                                <option value="90">1.5 hours</option>
                                <option value="120" selected>2 hours</option>
                                <option value="180">3 hours</option>
                                <option value="240">4 hours</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Quick Date Range Presets</label>
                            <div class="preset-buttons">
                                <button type="button" class="preset-btn" data-preset="thisWeek">This Week</button>
                                <button type="button" class="preset-btn" data-preset="nextWeek">Next Week</button>
                                <button type="button" class="preset-btn" data-preset="next2Weeks">Next 2 Weeks</button>
                                <button type="button" class="preset-btn" data-preset="thisMonth">This Month</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Privacy & Permissions</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="isPublic" name="isPublic">
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">Make this event public</span>
                                </label>
                                <div class="form-help">Public events can be found by anyone and joined without invitation</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="allowMaybe" name="allowMaybe" checked>
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">Allow "Maybe" responses</span>
                                </label>
                                <div class="form-help">Let participants indicate uncertainty with "maybe" in addition to available/unavailable</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="showParticipantNames" name="showParticipantNames" checked>
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">Show participant names</span>
                                </label>
                                <div class="form-help">Display who selected each time slot (anonymous if unchecked)</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="requireAuth" name="requireAuth">
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">Require authentication</span>
                                </label>
                                <div class="form-help">Participants must be logged in to respond</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="autoReminders" name="autoReminders" checked>
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">Send automatic reminders</span>
                                </label>
                                <div class="form-help">Automatically remind participants to respond if they haven't</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Initial Participants</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="participantEmails">Participant Emails (Optional)</label>
                            <textarea id="participantEmails" 
                                      name="participantEmails"
                                      class="form-input form-textarea" 
                                      placeholder="alice@example.com, bob@example.com, carol@example.com"
                                      rows="3"
                                      aria-describedby="participantsHelp"></textarea>
                            <div class="form-help" id="participantsHelp">
                                Enter email addresses separated by commas. Invitations will be sent automatically.
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <div class="participant-preview" id="participantPreview">
                                <div class="participant-item current-user">
                                    <div class="participant-avatar">J</div>
                                    <span class="participant-name">jun (you)</span>
                                    <span class="participant-role">Creator</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Preview</h3>
                    <div class="event-preview" id="eventPreview">
                        <div class="preview-card">
                            <div class="preview-header">
                                <h4 id="previewTitle">Event Title</h4>
                                <span class="preview-code" id="previewCode">CODE</span>
                            </div>
                            <p class="preview-description" id="previewDescription">Event description will appear here...</p>
                            <div class="preview-meta">
                                <div class="preview-meta-item">
                                    <strong>Dates:</strong> <span id="previewDates">Select dates</span>
                                </div>
                                <div class="preview-meta-item">
                                    <strong>Time Range:</strong> <span id="previewTimes">Select times</span>
                                </div>
                                <div class="preview-meta-item">
                                    <strong>Duration:</strong> <span id="previewDuration">Not specified</span>
                                </div>
                                <div class="preview-meta-item">
                                    <strong>Timezone:</strong> <span id="previewTimezone">Select timezone</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="history.back()">Cancel</button>
                    <button type="button" class="btn btn-outline" id="saveAsDraftBtn">Save as Draft</button>
                    <button type="submit" class="btn btn-primary btn-large" id="createEventBtn">
                        <span class="btn-text">Create Event</span>
                        <span class="btn-loading" style="display: none;">Creating...</span>
                    </button>
                </div>
            </form>
        </div>
    </main>

    <!-- Success Modal -->
    <div class="modal" id="successModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Event Created Successfully!</h3>
            </div>
            <div class="modal-body">
                <div class="success-message">
                    <div class="success-icon">✅</div>
                    <p>Your event "<strong id="successEventTitle"></strong>" has been created.</p>
                    <div class="success-details">
                        <div class="success-item">
                            <strong>Event Code:</strong> 
                            <span id="successEventCode" class="code-highlight"></span>
                            <button class="copy-btn" onclick="copyEventCode()">Copy</button>
                        </div>
                        <div class="success-item">
                            <strong>Share Link:</strong>
                            <input type="text" id="successShareLink" class="share-link-input" readonly>
                            <button class="copy-btn" onclick="copyShareLink()">Copy</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="createAnotherEvent()">Create Another</button>
                <button class="btn btn-primary" onclick="viewCreatedEvent()">View Event</button>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner"></div>
    </div>

    <script src="data.js"></script>
    <script src="utils.js"></script>
    <script src="script.js"></script>
    <script src="create-script.js"></script>
</body>
</html>
